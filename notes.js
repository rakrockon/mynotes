var notes = [
  {
    "_id": "57daa566f28ea57fa2780840",
    "index": 0,
    "color": "Orange",
    "title": "Quizmo",
    "content": "Laboris incididunt reprehenderit dolor in. Commodo commodo est qui sit reprehenderit incididunt amet. Aliquip ullamco occaecat ipsum deserunt anim pariatur velit et. Ad anim ut sint Lorem ad ipsum id nostrud laboris. Deserunt adipisicing sunt eiusmod aute dolor.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa566306ba6fe3fba5352",
    "index": 1,
    "color": "White",
    "title": "Accupharm",
    "content": "Cillum officia elit tempor incididunt. Aliqua fugiat eu eu cupidatat ea aliquip nulla. Quis nostrud occaecat aliqua mollit adipisicing elit veniam eiusmod eiusmod nulla commodo.\r\n",
    "status": "archive"
  },
  {
    "_id": "57daa5667a498e510e0ab76f",
    "index": 2,
    "color": "Green",
    "title": "Uxmox",
    "content": "In excepteur ex exercitation tempor non excepteur amet. Consequat est Lorem ea qui cillum nostrud. Dolor ex consectetur nulla cupidatat ea occaecat sint adipisicing do occaecat amet incididunt velit mollit.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa5669eef69d0e175b47f",
    "index": 3,
    "color": "Yellow",
    "title": "Corecom",
    "content": "Commodo irure Lorem id aute cupidatat in commodo cupidatat. Irure id irure nostrud mollit consequat sint laborum ea mollit ipsum. Duis aliquip sit commodo et nostrud aute mollit sit aute id nisi et.\r\n",
    "status": "trash"
  },
  {
    "_id": "57daa5660c6cc3535f404946",
    "index": 4,
    "color": "Green",
    "title": "Poshome",
    "content": "Ullamco consequat reprehenderit duis elit ex labore nisi ea culpa mollit labore dolor commodo occaecat. Exercitation consequat consequat reprehenderit sit exercitation minim nostrud eiusmod voluptate reprehenderit in. Ipsum irure dolor incididunt tempor ea nulla aliqua in cillum Lorem pariatur irure sint enim. Quis exercitation tempor consequat nostrud ullamco ullamco. Dolore sunt occaecat esse excepteur proident cillum tempor sit ea. Aute occaecat do amet anim excepteur pariatur irure ad laboris irure dolore elit ut. Deserunt aliquip cillum cillum ut quis.\r\n",
    "status": "trash"
  },
  {
    "_id": "57daa5668f4bedc217196b52",
    "index": 5,
    "color": "Green",
    "title": "Hotcakes",
    "content": "Sint deserunt cupidatat culpa qui reprehenderit veniam. Reprehenderit laboris et fugiat enim. Aliquip minim proident eiusmod est deserunt. Aute ad ea nostrud enim aute sint adipisicing. Lorem enim culpa excepteur officia culpa aliquip laboris.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa566fcf0acece81c0f79",
    "index": 6,
    "color": "Blue",
    "title": "Buzzopia",
    "content": "Enim dolor laboris excepteur mollit pariatur Lorem pariatur mollit duis. Ad officia mollit sit cillum aliqua non sit non eu ea qui adipisicing tempor est. Ea aliquip officia ut nisi deserunt exercitation elit eiusmod incididunt Lorem pariatur pariatur velit. Eiusmod sint voluptate qui proident reprehenderit ex culpa aliquip pariatur ea adipisicing qui deserunt.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa5664a2377e9c7252c61",
    "index": 7,
    "color": "White",
    "title": "Insource",
    "content": "Sit ex nostrud aliqua enim cillum cillum minim commodo aliqua aliqua voluptate. Quis nulla ut mollit quis qui cupidatat velit Lorem consectetur sunt. Aliqua ea in commodo aliqua deserunt amet quis consequat magna dolore adipisicing.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa56640cd7f45f6b7844b",
    "index": 8,
    "color": "White",
    "title": "Deminimum",
    "content": "Pariatur nostrud ullamco magna laboris laborum ut. Duis esse eu sint voluptate voluptate id mollit id mollit do deserunt nostrud laborum dolore. Nostrud nostrud laboris amet veniam dolore in ut nulla mollit quis esse veniam aliquip do. Cillum voluptate do fugiat exercitation excepteur mollit tempor. Fugiat nisi ad minim cupidatat anim ipsum et in nisi veniam sit proident. Consectetur magna pariatur non culpa ad aute consequat pariatur sint. Reprehenderit velit culpa voluptate eu id adipisicing officia.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa5666e4e695f1b4b1c83",
    "index": 9,
    "color": "White",
    "title": "Emoltra",
    "content": "Veniam velit sunt esse sint dolor. Aliquip occaecat sint aliquip non non amet cillum eiusmod ad esse incididunt. Do velit ut aliquip aliqua exercitation veniam et magna adipisicing reprehenderit irure incididunt. Id eiusmod cillum esse culpa voluptate quis mollit qui incididunt dolor ea. Non aliquip elit ut ad occaecat irure esse eiusmod adipisicing nulla cupidatat aliquip id. Dolore aute exercitation ea amet sit cupidatat labore id Lorem anim.\r\n",
    "status": "trash"
  },
  {
    "_id": "57daa566c1a5945b8d9e5084",
    "index": 10,
    "color": "White",
    "title": "Insectus",
    "content": "Do aliqua do sunt aliqua culpa magna amet ipsum ullamco elit. Quis ipsum consequat aute ea nulla consequat sit amet incididunt excepteur do incididunt amet. Amet laborum quis labore excepteur aute officia culpa incididunt minim est. Occaecat est anim occaecat eiusmod irure velit Lorem exercitation voluptate exercitation enim. Nulla qui magna magna proident consequat commodo.\r\n",
    "status": "archive"
  },
  {
    "_id": "57daa5662bc167c59284bb18",
    "index": 11,
    "color": "Yellow",
    "title": "Utarian",
    "content": "Et nisi tempor excepteur laborum cillum ullamco aute proident pariatur non Lorem incididunt ea. Lorem sit irure cillum nostrud non officia cillum in eu anim laborum. Amet exercitation occaecat mollit tempor est dolore est eiusmod officia ea laboris adipisicing. Est ipsum aliqua anim quis mollit. Ex amet commodo cupidatat ad.\r\n",
    "status": "trash"
  },
  {
    "_id": "57daa566b38dba98974b2828",
    "index": 12,
    "color": "Yellow",
    "title": "Lunchpad",
    "content": "Fugiat aliqua amet esse incididunt sint in in. Do nulla eu elit do duis ex ad aliqua. Quis veniam esse enim et. Ullamco qui aliquip commodo veniam elit labore laborum veniam laboris excepteur tempor do. Proident esse laborum non aliquip do adipisicing elit enim.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa566811da3a2bd4beb14",
    "index": 13,
    "color": "Yellow",
    "title": "Frenex",
    "content": "Velit quis sint voluptate exercitation exercitation aliquip magna sint laboris eu excepteur do irure consequat. Duis ullamco reprehenderit ex excepteur ad et do. Do dolore ipsum officia dolore excepteur officia nostrud aliqua fugiat do.\r\n",
    "status": "trash"
  },
  {
    "_id": "57daa566174b22e717796f42",
    "index": 14,
    "color": "Blue",
    "title": "Qualitern",
    "content": "Quis ea dolore non laboris. Do reprehenderit fugiat nulla aliquip. Consectetur dolor non laborum in duis proident minim anim aliqua amet. Amet reprehenderit ullamco aute amet aute consectetur irure eu nostrud. Culpa amet aute enim exercitation ullamco. Irure labore commodo cupidatat enim nulla incididunt adipisicing tempor laborum eu ex dolor et.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa566de5afe0e2f98abc2",
    "index": 15,
    "color": "Green",
    "title": "Quintity",
    "content": "Eiusmod ipsum Lorem veniam voluptate ipsum non sint sunt sunt voluptate. Duis tempor magna velit pariatur adipisicing aliquip mollit ea tempor adipisicing pariatur amet eu. Id laboris exercitation eu elit aliqua minim eu ipsum qui velit reprehenderit mollit eiusmod eu. Anim reprehenderit tempor commodo ut consequat laboris et aliquip labore minim quis. Cupidatat cupidatat exercitation sint consequat ut non minim est. Et consectetur minim ipsum in Lorem tempor consectetur commodo dolore.\r\n",
    "status": "archive"
  },
  {
    "_id": "57daa566da2d795301fc645d",
    "index": 16,
    "color": "Blue",
    "title": "Ronelon",
    "content": "Dolore duis duis officia veniam tempor anim ullamco est. Est mollit labore enim nisi magna pariatur eiusmod dolore magna. Laborum et esse non tempor quis. Labore nulla in excepteur pariatur nulla cillum nulla laboris. Duis enim ad cillum et sunt exercitation velit elit mollit ex aute tempor. Anim anim sit velit et aliquip fugiat ad. Velit eu in dolore eiusmod.\r\n",
    "status": "current"
  },
  {
    "_id": "57daa566294f27b4ec2b0545",
    "index": 17,
    "color": "Grey",
    "title": "Zorromop",
    "content": "Laboris laborum occaecat aliquip irure tempor cillum excepteur exercitation deserunt. Laborum labore pariatur consequat elit ea id aute cupidatat. Amet et consectetur pariatur sint aliqua exercitation.\r\n",
    "status": "current"
  }
]
var colors = [
	{
		class: "white",
		color: "White"
	},{
		class: "red accent-1",
		color: "Red"
	},{
		class: "orange lighten-3",
		color: "Orange"
	},{
		class: "yellow accent-1",
		color: "Yellow"
	},{
		class: "blue-grey lighten-4",
		color: "Grey"
	},{
		class: "light-blue accent-1",
		color: "Blue"
	},{
		class: "teal accent-1",
		color: "Teal"
	},{
		class: "light-green accent-1",
		color: "Green"
	}
];


/* Search */
var Search = React.createClass({
  getInitialState: function() {
      return {
        searchClass: "search-wrapper card"
      };
    },
  searchFocus: function () {
    this.setState({
        searchClass : "search-wrapper card focused"
      });
  },
  searchBlur: function () {
    this.setState({
        searchClass : "search-wrapper card"
      });
  },
  render(){
    return(
      <div className={this.state.searchClass}>
              <input id="search" onFocus={this.searchFocus} onBlur={this.searchBlur}/><i className="material-icons">search</i>
            </div>
    );
  }
})


var SideMenu = React.createClass({
	getInitialState: function() {
		return {
			currentState: "current"
		};
	},
	showNotes:function (state) {
		if(this.state.currentState != state){
			this.setState({
				currentState : state 
			});
			$('.cards-container').isotope({ filter: '.'+state });
			$('.noteStatusBtn').removeClass('active');
			$('#btn-'+state).addClass('active');
      $('.button-collapse').sideNav('hide');
		}
	},
  render() {
    return (
      <ul id="nav-mobile" className="side-nav fixed ">
            <li>
              <div className="userView">
                <img className="background" src="images/office.jpg" />
                <a href="#!user"><img className="circle" src="images/yuna.jpg" /></a>
                <a href="#!name"><span className="white-text name">John Doe</span></a>
                <a href="#!email"><span className="white-text email">jdandturk@gmail.com</span></a>
              </div>
            </li>
            <li className="search hide" id="searchContainer">
              <Search />
            </li>
            <li><a id="btn-current" className="sideBorder noteStatusBtn waves-effect waves-teal active" onClick={this.showNotes.bind(this,"current")}><i className="material-icons">lightbulb_outline</i>Notes</a></li>
            <li><a id="btn-archive" className="sideBorder noteStatusBtn waves-effect waves-teal " onClick={this.showNotes.bind(this,"archive")}><i className="material-icons">archive</i>Archive</a></li>
            <li><a id="btn-trash" className="sideBorder noteStatusBtn waves-effect waves-teal " onClick={this.showNotes.bind(this,"trash")}><i className="material-icons">delete</i>Trash</a></li>
            <li><div className="divider"></div></li>
            <li><a className="sideBorder waves-effect settings-modal-trigger" href="#settings-modal"><i className="material-icons">settings</i>Settings</a></li>
            <li><a className="sideBorder waves-effect" href="#!"><i className="material-icons">announcement</i>Send Feedback</a></li>
            <li><a className="sideBorder waves-effect" href="#!"><i className="material-icons">help</i>Help</a></li>
            <li><div className="divider"></div></li>
            <li><a className="sideBorder waves-effect waves-red" href="#!"><i className="material-icons">power_settings_new</i>Log Out</a></li>
          </ul>
    );
  }
});

var MainNav = React.createClass({
  render() {
    return (
      <nav className="nav-main">
            <div className="nav-wrapper row teal">
              <div className="col s12">
                  <a href="#!" className="brand-logo">My Notes</a>
                  <a href="#" data-activates="nav-mobile" className="button-collapse"><i className=" material-icons">menu</i></a>
                  <ul className="right">
                    <li className="hide"><a href="sass.html"><i className="material-icons">search</i></a></li>
                    <li className="hide"><a href="#!" className="hide-on-small-only" ><i className=" material-icons tooltipped" data-tooltip="List View">view_stream</i></a></li>
                    <li className="hide"><a href="#!" className="hide-on-med-and-down"><i className="material-icons">view_module</i></a></li>
                    <li className="hide"><a href="#!"><i className=" material-icons tooltipped"  data-tooltip="Refresh">refresh</i></a></li>
                  </ul>
                </div>
            </div>
          </nav>
    );
  }
})
var Header = React.createClass({
  componentDidMount: function() {
    $(".button-collapse").sideNav();
  },
  render() {
    return (
      <header>
        <SideMenu/>
        <MainNav/>
      </header>
    );
  }
})


/* Color Circle */
var ColorCircle = React.createClass({
	changeColor : function (color) {
		//alert(color)
		this.props.changeColor(color)
	},
	render() {
		var colorClassName = this.props.data.colorClass+" tooltipped"
		return (
			<span className={colorClassName} data-tooltip={this.props.data.color} onClick={this.changeColor.bind(this,this.props.data.color)}><i className={this.props.data.currentColorIndicator}>done</i></span>
		);
	}
})

/* Color Selector */
var ColorSelector = React.createClass({
	getInitialState: function() {
  		return {
  			colorSelectorClass : "card colors-container hidden",
  			currentColor : this.props.currentColor
  		};
  	},
  	colorMouseOver: function () {
  		this.setState({
  			colorSelectorClass : "card colors-container visible"
  		});
  	},
  	colorMouseOut: function () {
  		this.setState({
  			colorSelectorClass : "card colors-container hidden"
  		});	
  	},
  	changeColor: function (selectedColor) {
  		this.setState({
  			currentColor : selectedColor
  		});
  		this.props.changeColor(selectedColor)
  	},
	render: function () {
		var colors = [];
		var currentColor = this.state.currentColor;
		var that = this;
		this.props.colors.forEach(function(color) {
			var colorClass = "circle "+color.class;
			var currentColorIndicator = "";
			if(currentColor == color.color){
				currentColorIndicator ="large material-icons"
			}
			else{
				currentColorIndicator ="large material-icons hide"
			}
			var data = {}
			data.colorClass = colorClass;
			data.color = color.color;
			data.currentColorIndicator = currentColorIndicator;
			colors.push(<ColorCircle data={data} key={color.color} changeColor={that.changeColor}/>);
	    });
		return(
			<div className={this.state.colorSelectorClass} onMouseOver={this.colorMouseOver} onMouseOut={this.colorMouseOut}>
				{colors}
			</div>
		)
	}
})
/*Action Items */
var ActionItmes = React.createClass({
	getInitialState: function() {
		return {
			colorClass : "blue-grey-text text-darken-2 tooltipped hide",
			archiveClass : "blue-grey-text text-darken-2 tooltipped hide",
			deleteClass : "blue-grey-text text-darken-2 tooltipped hide",
			unarchiveClass : "blue-grey-text text-darken-2 tooltipped hide",
			restoreClass : "blue-grey-text text-darken-2 tooltipped hide",
			deleteFClass : "blue-grey-text text-darken-2 tooltipped hide"
		};
	},
	actionSelected: function (status) {
		this.props.actionSelected(status)
	},
  	colorMouseOver: function () {
  		this.props.colorMouseOver();
  	},
  	colorMouseOut: function () {
  		this.props.colorMouseOut();
  	},
	showActionItmes : function (status) {
		if(status == "archive"){
			this.setState({
				colorClass : "blue-grey-text text-darken-2 tooltipped",
				archiveClass : "blue-grey-text text-darken-2 tooltipped hide",
				unarchiveClass : "blue-grey-text text-darken-2 tooltipped",
				deleteClass : "blue-grey-text text-darken-2 tooltipped",
				restoreClass : "blue-grey-text text-darken-2 tooltipped hide",
				deleteFClass : "blue-grey-text text-darken-2 tooltipped hide"
			});
		} else if(status == "current"){
			this.setState({
				colorClass : "blue-grey-text text-darken-2 tooltipped",
				archiveClass : "blue-grey-text text-darken-2 tooltipped",
				deleteClass : "blue-grey-text text-darken-2 tooltipped",
				unarchiveClass : "blue-grey-text text-darken-2 tooltipped hide",
				restoreClass : "blue-grey-text text-darken-2 tooltipped hide",
				deleteFClass : "blue-grey-text text-darken-2 tooltipped hide"
			});
		} else if(status == "trash"){
			this.setState({
				colorClass : "blue-grey-text text-darken-2 tooltipped hide",
				archiveClass : "blue-grey-text text-darken-2 tooltipped hide",
				deleteClass : "blue-grey-text text-darken-2 tooltipped hide",
				unarchiveClass : "blue-grey-text text-darken-2 tooltipped hide",
				restoreClass : "blue-grey-text text-darken-2 tooltipped",
				deleteFClass : "blue-grey-text text-darken-2 tooltipped"
			});
		}
	},
	componentWillMount: function() {
		this.showActionItmes(this.props.status);
	},
	render() {
		return (
			<div className={this.props.noteActionItemsClass}>
		        <a ref="colorsRef" className={this.state.colorClass} data-tooltip="Change Colors" href="#!" onMouseOver={this.colorMouseOver} onMouseOut={this.colorMouseOut}><i className="material-icons">color_lens</i></a>
				<a ref="archiveRef" className={this.state.archiveClass} onClick={this.actionSelected.bind(this,"archive")} data-tooltip="Archive" href="#!"><i className="material-icons">archive</i></a>
				<a ref="unarchiveRef" className={this.state.unarchiveClass} onClick={this.actionSelected.bind(this,"unarchive")} data-tooltip="Unarchive" href="#!"><i className="material-icons">unarchive</i></a>
				<a ref="deleteRef" className={this.state.deleteClass} onClick={this.actionSelected.bind(this,"delete")} data-tooltip="Delete" href="#!"><i className="material-icons">delete</i></a>
				<a ref="restoreRef" className={this.state.restoreClass} onClick={this.actionSelected.bind(this,"restore")} data-tooltip="Restore" href="#!"><i className="material-icons">restore</i></a>
				<a ref="deleteFRef" className={this.state.deleteFClass} onClick={this.actionSelected.bind(this,"delete-forever")} data-tooltip="Delete Forever" href="#!"><i className="material-icons">delete_sweep</i></a>
		    </div>
		);
	}
})
/* Note */
var Note = React.createClass({
	getInitialState: function() {
  		return {
  			noteActionItemsClass: "note-action-items",
  			noteMainClass : "card mynote-card hoverable",
  			noteColor : "",
  			status : this.props.note.status
  		};
  	},
  	mouseOver: function () {
  		this.setState({
  			noteActionItemsClass : "note-action-items"
  		});
  	},
  	mouseOut: function () {
  		this.setState({
  			noteActionItemsClass : "note-action-items"
  		});	
  	},
  	colorMouseOver: function () {
  		this.refs.colorSelector.colorMouseOver();
  	},
  	colorMouseOut: function () {
  		this.refs.colorSelector.colorMouseOut();
  	},
  	changeColor : function (newColor) {
  		this.setColor(newColor);
  	},
  	setColor: function (color) {
  		var colorClass = "";
		for (var i = 0; i < this.props.colors.length; i++) {
			if(this.props.colors[i].color == color)
				colorClass = this.props.colors[i].class;
		}
		this.setState({
  			noteMainClass : "card mynote-card hoverable "+colorClass+" "+this.props.note.status,
  			noteColor : colorClass
  		});	
  	},
  	actionSelected: function (action) {
  		var status = "";
  		if(action == "archive"){
  			status = "archive";
  		} else if(action == "unarchive" || action == "restore"){
  			status = "current";
  		} else if(action == "delete"){
  			status = "trash";
  		}
  		this.setState({
  			noteMainClass : "card mynote-card hoverable "+this.state.noteColor+" "+status
  		});	
  		var that = this;
  		this.refs.ActionItmesRef.showActionItmes(status);
  		setTimeout(function() {
  			$('.cards-container').isotope();
		}, 100);
  	},
  	componentDidMount: function() {
		//$('.tooltipped').tooltip({delay: 50});
	},
	componentWillMount() {
		this.setColor(this.props.note.color);
	},
	render: function(){
		
		return (
		  <div ref="noteComponent" className={this.state.noteMainClass} onMouseOver={this.mouseOver} onMouseOut={this.mouseOut} >
		    <div className="card-content">
		      <span className="card-title">{this.props.note.title}</span>
		      <p>{this.props.note.content}</p>
		    </div>
		    <div className="card-action">
		      <ActionItmes ref="ActionItmesRef" colorMouseOver={this.colorMouseOver} colorMouseOut={this.colorMouseOut} noteActionItemsClass={this.state.noteActionItemsClass} status={this.state.status} actionSelected={this.actionSelected}/>
		      <ColorSelector ref="colorSelector" colors={this.props.colors} currentColor={this.props.note.color} changeColor={this.changeColor}/>
		    </div>
		  </div>
		);
	}
});
/* Notes */
var Notes = React.createClass({
	componentDidMount: function() {
		
	},
	render() {
		var notes = [];
		this.props.notes.forEach(function(note) {
			notes.push(<Note note={note} key={note._id} colors={colors}/>);
	    });
		return (
			<div>
				{notes}
			</div>
		);
	}
})

var MyNotesApp = React.createClass({
	componentDidMount: function() {
		
		
		$('#myNotesApp').fadeIn("slow");
			$('#preloader').fadeOut("slow");
		var $grid =$('.cards-container').isotope({
		  // set itemSelector so .grid-sizer is not used in layout
		  itemSelector: '.mynote-card',
		  masonry: {
		    // use element for option
		    columnWidth: 25
		  },
		  filter : '.current'
		});
    setTimeout(function() {
      $grid.isotope('layout');
    }, 500);
		
		$('.tooltipped').on({
			mouseover: function() {
		        event.preventDefault();
		        var offset = $(this).offset();
		        $('#custom-tooltip').offset({top:(offset.top+30), left:offset.left});
		        $('#custom-tooltip').html($(this).attr("data-tooltip"));
		    },
		    mouseout: function() {
		        event.preventDefault();
		        $('#custom-tooltip').offset({top:0, left:0});
		        $('#custom-tooltip').html("");
		    }
		});
	},
	render() {
		return (
			<div>
			  	<Header />
			  	<main>
			  		<div className="cards-container" id="notesContainer">
			  			<Notes notes={notes} />
			        </div>
			  	</main>
			  	<ToolTip />
			</div>
		);
	}
})

var ToolTip = React.createClass({
	render() {
		return (
			<div className="custom-tooltip toast" id="custom-tooltip">
				
			</div>
		);
	}
})

ReactDOM.render(
  <MyNotesApp />,
  document.getElementById('myNotesApp')
);